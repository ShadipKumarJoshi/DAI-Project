{% load static %}

{% comment %}Our News & Events{% endcomment %}
<section class="news preview">
  <div class="max-w-7xl mx-auto">
    <div class="flex justify-between items-center mb-10">
      <h2 class="text-4xl font-bold text-gray-900">Our News & Events</h2>
      <button class="btn-blue">See All Events Posts</button>
    </div>

    {% comment %}Left: featured news preview{% endcomment %}
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-8">
        {% for news in featured_news %}
          <div class="news{{ forloop.counter }}">
            <div class="relative">
                <img src="{{ news.image.url }}" alt="{{ news.title }}" class="w-full h-48 object-cover rounded-3xl" />
              {% if news.status_tag %}
                <span class="absolute top-3 left-3 bg-yellow-200 text-black text-xs px-3 py-1 rounded-md shadow">{{ news.status_tag.name }}</span>
              {% endif %}
            </div>

            <div class="news preview">
              <div class="flex justify-between items-center text-sm text-gray-500 mb-2 py-2">
                <div class="flex space-x-2">
                  <p>{{ news.created_at|date:'d-m-Y' }}</p>

                  {% if news.updated_at|date:'Y-m-d' != news.created_at|date:'Y-m-d' %}
                    <p class=" text-gray-500">[Updated] {{ news.updated_at|date:'d-m-Y' }}</p>
                  {% endif %}

                  {% if news.location %}
                    <p class="location">· {{ news.location }}</p>
                  {% endif %}
                </div>

                {% if news.type %}
                  <p class="text-xs">· {{ news.type.name }}</p>
                {% endif %}
              </div>

              <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ news.title }}</h3>
              <p class="text-base text-gray-700">{{ news.description |truncatewords:10 }}</p>
            </div>
          </div>
        {% empty %}
          <p>No featured news available.</p>
        {% endfor %}
      </div>

      {% comment %}Right: other news/events{% endcomment %}
      <div class="lg:col-span-1 space-y-6">
        {% for news in other_news %}
          <div class="flex items-center p-4">
              <img src="{{ news.image.url }}" alt="{{ news.title }}" class="w-24 h-16 object-cover rounded-md mr-4" />
            <div>
              <p class="text-xs text-gray-500 mb-1">
                {{ news.created_at|date:'d-m-Y' }} ·{% if news.type %}
                  {{ news.type.name }}
                {% else %}
                  News
                {% endif %}
              </p>
              <h4 class="text-base font-semibold text-gray-900">{{ news.title }}</h4>
            </div>
          </div>

          {% if not forloop.last %}
            <div class="border-t border-gray-200 -my-1 -mt-7"></div>
          {% endif %}
        {% empty %}
          <p>No other news available.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
