{% load static %}

{% if sme_section %}
  <!-- SME Development Steps Section -->
  <section class="bg-gray-50 py-16 relative overflow-hidden">
    <!-- Main wrapper for positioning -->
    <div class="relative max-w-6xl mx-auto px-4 h-[600px]">
      <!-- Decorative Curve (SVG Path) -->
      <div class="relative w-full h-full z-0">
        <svg class="absolute top-0 left-0 w-full h-full" viewBox="3 -48 1388 829">
          <path d="M -2 505 C 175 677 368 505 483 421 S 881 458 984 304 S 1057 -48 1391 4" fill="none" stroke="#ff7f50" stroke-width="4" />
        </svg>

        <!-- Positioned 4 steps -->
        {% with step=sme_steps.0 %}
          {% if step %}
            <div class="absolute flex flex-col items-center text-center z-10" style="left: 20%; top: 85%; transform: translate(-50%, -50%);">
              <img src="{{ step.image.url }}" alt="Start Icon" class="h-16 w-16 mb-2" />
              <h3 class="font-semibold text-gray-900 mb-1">{{ step.title }}</h3>
              <p class="text-sm text-gray-700 max-w-[150px]">{{ step.description }}</p>
              {% if step.is_button_active %}
                <a href="{{ step.button_url }}" class="btn-{{ step.button_class }}">{{ step.button_text }}</a>
              {% endif %}
            </div>
          {% endif %}
        {% endwith %}

        {% with step=sme_steps.1 %}
          {% if step %}
            <div class="absolute flex flex-col items-center text-center z-10" style="left: 42%; top: 65%; transform: translate(-50%, -50%);">
              <img src="{{ step.image.url }}" alt="Manage Icon" class="h-16 w-16 mb-2" />
              <h3 class="font-semibold text-gray-900 mb-1">{{ step.title }}</h3>
              <p class="text-sm text-gray-700 max-w-[150px]">{{ step.description }}</p>
              {% if step.is_button_active %}
                <a href="{{ step.button_url }}" class="btn-{{ step.button_class }}">{{ step.button_text }}</a>
              {% endif %}
            </div>
          {% endif %}
        {% endwith %}

        {% with step=sme_steps.2 %}
          {% if step %}
            <div class="absolute flex flex-col items-center text-center z-10" style="left: 65%; top: 55%; transform: translate(-50%, -50%);">
              <img src="{{ step.image.url }}" alt="Grow Icon" class="h-16 w-16 mb-2" />
              <h3 class="font-semibold text-gray-900 mb-1">{{ step.title }}</h3>
              <p class="text-sm text-gray-700 max-w-[150px]">{{ step.description }}</p>
              {% if step.is_button_active %}
                <a href="{{ step.button_url }}" class="btn-{{ step.button_class }}">{{ step.button_text }}</a>
              {% endif %}
            </div>
          {% endif %}
        {% endwith %}

        {% with step=sme_steps.3 %}
          {% if step %}
            <div class="absolute flex flex-col items-center text-center z-10" style="left: 85%; top: 15%; transform: translate(-50%, -50%);">
              <img src="{{ step.image.url }}" alt="Sustain Icon" class="h-16 w-16 mb-2" />
              <h3 class="font-semibold text-gray-900 mb-1">{{ step.title }}</h3>
              <p class="text-sm text-gray-700 max-w-[150px]">{{ step.description }}</p>
              {% if step.is_button_active %}
                <a href="{{ step.button_url }}" class="btn-{{ step.button_class }}">{{ step.button_text }}</a>
              {% endif %}
            </div>
          {% endif %}
        {% endwith %}
      </div>

      <!-- Left Column: Section title and description -->
      <div class="absolute top-0 left-20 lg:w-1/3 z-20 bg-opacity-90">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">{{ sme_section.title }}</h2>
        <p class="text-lg text-gray-600 mb-6">{{ sme_section.description }}</p>
        {% if sme_section.is_button_active %}
          <a href="{{ sme_section.button_url }}" class="btn-{{ sme_section.button_class }}">{{ sme_section.button_text }}</a>
        {% endif %}
      </div>
    </div>

    <!-- Bottom Decorative Wave -->
    <div class="absolute bottom-0 left-0 w-full h-24 pointer-events-none">
      <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="w-full h-full">
        <path d="M0,0 C20,50 80,50 100,0 L100,100 L0,100 Z" fill="#F5F8FF"></path>
      </svg>
    </div>
  </section>
{% endif %}
